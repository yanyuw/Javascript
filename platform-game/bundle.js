!function(n){var t={};function e(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:r})},e.r=function(n){Object.defineProperty(n,"__esModule",{value:!0})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=3)}([function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function n(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}();t.State=function(){function n(t,e,r){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.level=t,this.actors=e,this.status=r}return r(n,[{key:"update",value:function(t,e){var r=this,o=this.actors.map(function(n){return n.update(t,r,e)}),i=new n(this.level,o,this.status);if("playing"!=i.status)return i;var s=i.player;if(this.level.touches(s.pos,s.size,"lava"))return new n(this.level,o,"lost");var a,u,l=!0,c=!1,f=void 0;try{for(var p,y=o[Symbol.iterator]();!(l=(p=y.next()).done);l=!0){var h=p.value;h!=s&&(u=s,(a=h).pos.x+a.size.x>u.pos.x&&a.pos.x<u.pos.x+u.size.x&&a.pos.y+a.size.y>u.pos.y&&a.pos.y<u.pos.y+u.size.y)&&(i=h.collide(i))}}catch(n){c=!0,f=n}finally{try{!l&&y.return&&y.return()}finally{if(c)throw f}}return i}},{key:"player",get:function(){return this.actors.find(function(n){return"player"==n.type})}}],[{key:"start",value:function(t){return new n(t,t.startActors,"playing")}}]),n}()},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function n(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}();function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}t.Level=function(){function n(t){var e=this;o(this,n);var r=t.trim().split("\n").map(function(n){return[].concat(function(n){if(Array.isArray(n)){for(var t=0,e=Array(n.length);t<n.length;t++)e[t]=n[t];return e}return Array.from(n)}(n))});this.height=r.length,this.width=r[0].length,this.startActors=[],this.rows=r.map(function(n,t){return n.map(function(n,r){return type=l[n],"string"==typeof type?type:(e.startActors.push(type.create(new i(r,t),n)),"empty")})})}return r(n,[{key:"touches",value:function(n,t,e){for(var r=Math.floor(n.x),o=Math.ceil(n.x+t.x),i=Math.floor(n.y),s=Math.ceil(n.y+t.y),a=i;a<s;a++)for(var u=r;u<o;u++){if((u<0||u>=this.width||a<0||a>=this.height?"wall":this.rows[a][u])==e)return!0}return!1}}]),n}();var i=function(){function n(t,e){o(this,n),this.x=t,this.y=e}return r(n,[{key:"plus",value:function(t){return new n(this.x+t.x,this.y+t.y)}},{key:"times",value:function(t){return new n(this.x*t,this.y*t)}}]),n}(),s=function(){function n(t,e){o(this,n),this.pos=t,this.speed=e}return r(n,[{key:"type",get:function(){return"player"}}],[{key:"create",value:function(t){return new n(t.plus(new i(0,-.5)),new i(0,0))}}]),n}();s.prototype.size=new i(.8,1.5);var a=function(){function n(t,e,r){o(this,n),this.pos=t,this.speed=e,this.reset=r}return r(n,[{key:"type",get:function(){return"lava"}}],[{key:"create",value:function(t,e){return"="==e?new n(t,new i(2,0)):"|"==e?new n(t,new i(0,2)):"v"==e?new n(t,new i(0,3),t):void 0}}]),n}();a.prototype.size=new i(1,1);var u=function(){function n(t,e,r){o(this,n),this.pos=t,this.basePos=e,this.wobble=r}return r(n,[{key:"type",get:function(){return"coin"}}],[{key:"create",value:function(t){var e=t.plus(new i(.2,.1));return new n(e,e,Math.random()*Math.PI*2)}}]),n}();u.prototype.size=new i(.6,.6);var l={".":"empty","#":"wall","+":"lava","@":s,o:u,"=":a,"|":a,v:a};a.prototype.collide=function(n){return new State(n.level,n.actors,"lost")},u.prototype.collide=function(n){var t=this,e=n.actors.filter(function(n){return n!=t}),r=n.status;return e.some(function(n){return"coin"==n.type})||(r="won"),new State(n.level,e,r)},a.prototype.update=function(n,t){var e=this.pos.plus(this.speed.times(n));return t.level.touches(e,this.size,"wall")?this.reset?new a(this.reset,this.speed,this.reset):new a(this.pos,this.speed.times(-1)):new a(e,this.speed,this.reset)};u.prototype.update=function(n){var t=this.wobble+8*n,e=.07*Math.sin(t);return new u(this.basePos.plus(new i(0,e)),this.basePos,t)};s.prototype.update=function(n,t,e){var r=0;e.ArrowLeft&&(r-=7),e.ArrowRight&&(r+=7);var o=this.pos,a=o.plus(new i(r*n,0));t.level.touches(a,this.size,"wall")||(o=a);var u=this.speed.y+30*n,l=o.plus(new i(0,u*n));return t.level.touches(l,this.size,"wall")?u=e.ArrowUp&&u>0?-17:0:o=l,new s(o,new i(r,u))}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function n(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}();function o(n){if(Array.isArray(n)){for(var t=0,e=Array(n.length);t<n.length;t++)e[t]=n[t];return e}return Array.from(n)}function i(n,t){var e=document.createElement(n),r=!0,o=!1,i=void 0;try{for(var s,a=Object.keys(t)[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var u=s.value;e.setAttribute(u,t[u])}}catch(n){o=!0,i=n}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}for(var l=arguments.length,c=Array(l>2?l-2:0),f=2;f<l;f++)c[f-2]=arguments[f];var p=!0,y=!1,h=void 0;try{for(var v,d=c[Symbol.iterator]();!(p=(v=d.next()).done);p=!0){var w=v.value;e.appendChild(w)}}catch(n){y=!0,h=n}finally{try{!p&&d.return&&d.return()}finally{if(y)throw h}}return e}var s=t.DOMDisplay=function(){function n(t,e){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.dom=i("div",{class:"game"},function(n){return i.apply(void 0,["table",{class:"background",style:"width: "+n.width*a+"px"}].concat(o(n.rows.map(function(n){return i.apply(void 0,["tr",{style:"height: "+a+"px"}].concat(o(n.map(function(n){return i("td",{class:n})}))))}))))}(e)),this.actorLayer=null,t.appendChild(this.dom)}return r(n,[{key:"clear",value:function(){this.dom.remove()}}]),n}(),a=20;s.prototype.setState=function(n){var t;this.actorLayer&&this.actorLayer.remove(),this.actorLayer=(t=n.actors,i.apply(void 0,["div",{}].concat(o(t.map(function(n){var t=i("div",{class:"actor "+n.type});return t.style.width=n.size.x*a+"px",t.style.height=n.size.y*a+"px",t.style.left=n.pos.x*a+"px",t.style.top=n.pos.y*a+"px",t}))))),this.dom.appendChild(this.actorLayer),this.dom.className="game "+n.status,this.scrollPlayerIntoView(n)},s.prototype.scrollPlayerIntoView=function(n){var t=this.dom.clientWidth,e=this.dom.clientHeight,r=t/3,o=this.dom.scrollLeft,i=o+t,s=this.dom.scrollTop,u=s+e,l=n.player,c=l.pos.plus(l.size.times(.5)).times(a);c.x<o+r?this.dom.scrollLeft=c.x-r:c.x>i-r&&(this.dom.scrollLeft=c.x+r-t),c.y<s+r?this.dom.scrollTop=c.y-r:c.y>u-r&&(this.dom.scrollTop=c.y+r-e)}},function(n,t,e){"use strict";var r=e(2),o=e(1),i=e(0);var s=function(n){var t=Object.create(null);function e(e){n.includes(e.key)&&(t[e.key]="keydown"==e.type,e.preventDefault())}return window.addEventListener("keydown",e),window.addEventListener("keyup",e),t}(["ArrowLeft","ArrowRight","ArrowUp"]);function a(n,t){var e=new t(document.body,n),r=i.State.start(n),o=1;return new Promise(function(n){var t,i;t=function(t){return r=r.update(t,s),e.setState(r),"playing"==r.status||(o>0?(o-=t,!0):(e.clear(),n(r.status),!1))},i=null,requestAnimationFrame(function n(e){if(null!=i){var r=Math.min(e-i,100)/1e3;if(!1===t(r))return}i=e,requestAnimationFrame(n)})})}!async function(n,t){for(var e=0;e<n.length;)"won"==await a(new o.Level(n[e]),t)&&e++;console.log("You've won!")}(["                                                    \n................................................................................\n................................................................................\n................................................................................\n................................................................................\n................................................................................\n................................................................................\n..................................................................###...........\n...................................................##......##....##+##..........\n....................................o.o......##..................#+++#..........\n.................................................................##+##..........\n...................................#####..........................#v#...........\n............................................................................##..\n..##......................................o.o................................#..\n..#.....................o....................................................#..\n..#......................................#####.............................o.#..\n..#..........####.......o....................................................#..\n..#..@.......#..#................................................#####.......#..\n..############..###############...####################.....#######...#########..\n..............................#...#..................#.....#....................\n..............................#+++#..................#+++++#....................\n..............................#+++#..................#+++++#....................\n..............................#####..................#######....................\n................................................................................\n................................................................................\n","                                                                     \n................................................................................\n................................................................................\n....###############################.............................................\n...##.............................##########################################....\n...#.......................................................................##...\n...#....o...................................................................#...\n...#................................................=.......................#...\n...#.o........################...................o..o...........|........o..#...\n...#.........................#..............................................#...\n...#....o....................##########.....###################....##########...\n...#..................................#+++++#.................#....#............\n...###############....oo......=o.o.o..#######.###############.#....#............\n.....#...............o..o.............#.......#......#........#....#............\n.....#....................#############..######.####.#.########....########.....\n.....#.............########..............#...........#.#..................#.....\n.....#..........####......####...#####################.#..................#.....\n.....#........###............###.......................########....########.....\n.....#.......##................#########################......#....#............\n.....#.......#................................................#....#............\n.....###......................................................#....#............\n.......#...............o...........................................#............\n.......#...............................................o...........#............\n.......#########......###.....############.........................##...........\n.............#..................#........#####....#######.o.........########....\n.............#++++++++++++++++++#............#....#.....#..................#....\n.............#++++++++++++++++++#..........###....###...####.o.............#....\n.............####################..........#........#......#.....|.........#....\n...........................................#++++++++#......####............#....\n...........................................#++++++++#.........#........@...#....\n...........................................#++++++++#.........##############....\n...........................................##########...........................\n................................................................................\n","\n......................................#++#........................#######....................................#+#..\n......................................#++#.....................####.....####.................................#+#..\n......................................#++##########...........##...........##................................#+#..\n......................................##++++++++++##.........##.............##...............................#+#..\n.......................................##########++#.........#....................................o...o...o..#+#..\n................................................##+#.........#.....o...o....................................##+#..\n.................................................#+#.........#................................###############++#..\n.................................................#v#.........#.....#...#........................++++++++++++++##..\n.............................................................##..|...|...|..##............#####################...\n..............................................................##+++++++++++##............v........................\n...............................................................####+++++####......................................\n...............................................#.....#............#######........###.........###..................\n...............................................#.....#...........................#.#.........#.#..................\n...............................................#.....#.............................#.........#....................\n...............................................#.....#.............................##........#....................\n...............................................##....#.............................#.........#....................\n...............................................#.....#......o..o.....#...#.........#.........#....................\n...............#######........###...###........#.....#...............#...#.........#.........#....................\n..............##.....##.........#...#..........#.....#.....######....#...#...#########.......#....................\n.............##.......##........#.o.#..........#....##...............#...#...#...............#....................\n.....@.......#.........#........#...#..........#.....#...............#...#...#...............#....................\n....###......#.........#........#...#..........#.....#...............#...#####...######......#....................\n....#.#......#.........#.......##.o.##.........#.....#...............#.....o.....#.#.........#....................\n++++#.#++++++#.........#++++++##.....##++++++++##....#++++++++++.....#.....=.....#.#.........#....................\n++++#.#++++++#.........#+++++##.......##########.....#+++++++##+.....#############.##..o.o..##....................\n++++#.#++++++#.........#+++++#....o.................##++++++##.+....................##.....##.....................\n++++#.#++++++#.........#+++++#.....................##++++++##..+.....................#######......................\n++++#.#++++++#.........#+++++##.......##############++++++##...+..................................................\n++++#.#++++++#.........#++++++#########++++++++++++++++++##....+..................................................\n++++#.#++++++#.........#++++++++++++++++++++++++++++++++##.....+..................................................\n","\n..............................................................................................................\n..............................................................................................................\n..............................................................................................................\n..............................................................................................................\n..............................................................................................................\n........................................o.....................................................................\n..............................................................................................................\n........................................#.....................................................................\n........................................#.....................................................................\n........................................#.....................................................................\n........................................#.....................................................................\n.......................................###....................................................................\n.......................................#.#.................+++........+++..###................................\n.......................................#.#.................+#+........+#+.....................................\n.....................................###.###................#..........#......................................\n......................................#...#.................#...oooo...#.......###............................\n......................................#...#.................#..........#......#+++#...........................\n......................................#...#.................############.......###............................\n.....................................##...##......#...#......#................................................\n......................................#...#########...########..............#.#...............................\n......................................#...#...........#....................#+++#..............................\n......................................#...#...........#.....................###...............................\n.....................................##...##..........#.......................................................\n......................................#...#=.=.=.=....#............###........................................\n......................................#...#...........#...........#+++#.......................................\n......................................#...#....=.=.=.=#.....o......###.......###..............................\n.....................................##...##..........#.....................#+++#.............................\n..............................o...o...#...#...........#.....#................##v........###...................\n......................................#...#...........#..............#.................#+++#..................\n.............................###.###.###.###.....o.o..#++++++++++++++#...................v#...................\n.............................#.###.#.#.###.#..........#++++++++++++++#........................................\n.............................#.............#...#######################........................................\n.............................##...........##.........................................###......................\n..###.........................#.....#.....#.........................................#+++#................###..\n..#.#.........................#....###....#..........................................###.................#.#..\n..#...........................#....###....#######........................#####.............................#..\n..#...........................#...........#..............................#...#.............................#..\n..#...........................##..........#..............................#.#.#.............................#..\n..#.......................................#.......|####|....|####|.....###.###.............................#..\n..#................###.............o.o....#..............................#.........###.....................#..\n..#...............#####.......##..........#.............................###.......#+++#..........#.........#..\n..#...............o###o.......#....###....#.............................#.#........###..........###........#..\n..#................###........#############..#.oo.#....#.oo.#....#.oo..##.##....................###........#..\n..#......@..........#.........#...........#++#....#++++#....#++++#....##...##....................#.........#..\n..#############################...........#############################.....################################..\n..............................................................................................................\n..............................................................................................................\n","\n..................................................................................................###.#.......\n......................................................................................................#.......\n..................................................................................................#####.......\n..................................................................................................#...........\n..................................................................................................#.###.......\n..........................o.......................................................................#.#.#.......\n.............................................................................................o.o.o###.#.......\n...................###................................................................................#.......\n.......+..o..+................................................#####.#####.#####.#####.#####.#####.#####.......\n.......#.....#................................................#...#.#...#.#...#.#...#.#...#.#...#.#...........\n.......#=.o..#............#...................................###.#.###.#.###.#.###.#.###.#.###.#.#####.......\n.......#.....#..................................................#.#...#.#...#.#...#.#...#.#...#.#.....#.......\n.......+..o..+............o..................................####.#####.#####.#####.#####.#####.#######.......\n..............................................................................................................\n..........o..............###..............................##..................................................\n..............................................................................................................\n..............................................................................................................\n......................................................##......................................................\n...................###.........###............................................................................\n..............................................................................................................\n..........................o.....................................................#......#......................\n..........................................................##.....##...........................................\n.............###.........###.........###.................................#..................#.................\n..............................................................................................................\n.................................................................||...........................................\n..###########.................................................................................................\n..#.........#.o.#########.o.#########.o.##................................................#...................\n..#.........#...#.......#...#.......#...#.................||..................#.....#.........................\n..#..@......#####...o...#####...o...#####.....................................................................\n..#######.....................................#####.......##.....##.....###...................................\n........#=..................=................=#...#.....................###...................................\n........#######################################...#+++++++++++++++++++++###+++++++++++++++++++++++++++++++++++\n..................................................############################################################\n..............................................................................................................\n"],r.DOMDisplay)}]);